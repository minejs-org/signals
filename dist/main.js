var i=null,s=null,c=0,d=new Set,a=new Set;function v(n){let e=n,t=new Set;function r(){return i&&t.add(i),e}function o(u){Object.is(e,u)||(e=u,c>0?t.forEach(T=>d.add(T)):t.forEach(T=>T()));}function p(u){o(u(e));}function l(){return e}function x(u){return t.add(u),()=>t.delete(u)}let f=r;return f.set=o,f.update=p,f.peek=l,f.subscribe=x,f}function y(n){let e,t=false,r=()=>{if(t)return;e&&(e(),e=void 0);let p=i;i=r;try{let l=n();typeof l=="function"&&(e=l);}finally{i=p;}};r();let o=()=>{t||(t=true,e&&e());};return s&&s.push(o),o}function b(n){let e=v(void 0);y(()=>{e.set(n());});let t=e;return Object.defineProperty(t,"isComputed",{value:true,writable:false}),t}function g(n){c++;try{return n()}finally{if(c--,c===0){c++,a.clear();try{for(;d.size>0;){let e=Array.from(d);d.clear(),e.forEach(t=>{a.has(t)||(a.add(t),t());});}}finally{c--,a.clear();}}}}function h(n){let e=i;i=null;try{return n()}finally{i=e;}}function E(n,e){let t=n.peek();return y(()=>{let r=n(),o=h(()=>e(r,t));return t=r,o})}function C(n){let e={};for(let t in n)e[t]=v(n[t]);return e}function S(n){let e,t=false;return ()=>{if(t)return e;let r=n();return e=r,t=true,r}}function k(n){let e=[],t=s;s=e;try{return n(()=>{e.forEach(o=>o()),e.length=0,s=t;})}finally{s=t;}}var w={getCurrentEffect(){return i},getBatchDepth(){return c},getBatchedEffectsCount(){return d.size}};function m(n){return typeof n=="function"&&"set"in n&&"update"in n&&"peek"in n}function D(n){return m(n)&&"isComputed"in n}var R={signal:v,effect:y,computed:b,batch:g,untrack:h,on:E,store:C,memo:S,root:k,isSignal:m,isComputed:D,dev:w};export{g as batch,b as computed,R as default,w as dev,y as effect,D as isComputed,m as isSignal,S as memo,E as on,k as root,v as signal,C as store,h as untrack};//# sourceMappingURL=main.js.map
//# sourceMappingURL=main.js.map